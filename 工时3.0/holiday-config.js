// holiday-config.js
// 节假日配置系统

const holidayConfig = {
    // 2025年节假日配置
    2025: {
        // 法定节假日（3倍工资）
        holidays: [
            '2025-01-01', // 元旦
            '2025-01-28', '2025-01-29', '2025-01-30', '2025-01-31', '2025-02-01', '2025-02-02', '2025-02-03', // 春节
            '2025-04-04', '2025-04-05', '2025-04-06', // 清明节
            '2025-05-01', '2025-05-02', '2025-05-03', // 劳动节
            '2025-06-08', '2025-06-09', '2025-06-10', // 端午节
            '2025-09-29', '2025-09-30', '2025-10-01', '2025-10-02', '2025-10-03', '2025-10-04', '2025-10-05', // 中秋国庆
        ],
        // 调休日（周末上班但按2倍计算）
        extraWorkDays: [
            '2025-01-26', '2025-02-08', // 春节调休
            '2025-04-27', '2025-05-04', // 劳动节调休
            '2025-09-28', '2025-10-11', // 中秋国庆调休
        ],
        // 补班日（工作日上班，按1.5倍计算）
        makeUpWorkDays: [
            '2025-01-26', '2025-02-08', // 春节补班
            '2025-04-27', '2025-05-04', // 劳动节补班
            '2025-09-28', '2025-10-11', // 中秋国庆补班
        ]
    },
    // 2026年节假日配置
    2026: {
        // 法定节假日（3倍工资）
        holidays: [
            '2026-01-01', '2026-01-02', '2026-01-03', // 元旦
            '2026-02-11', '2026-02-12', '2026-02-13', '2026-02-14', '2026-02-15', '2026-02-16', '2026-02-17', // 春节（2月8日为除夕）
            '2026-04-04', '2026-04-05', '2026-04-06', // 清明节
            '2026-05-01', '2026-05-02', '2026-05-03', // 劳动节
            '2026-06-20', '2026-06-21', '2026-06-22', // 端午节
            '2026-10-01', '2026-10-02', '2026-10-03', '2026-10-04', '2026-10-05', '2026-10-06', '2026-10-07', // 国庆节
            '2026-09-25', '2026-09-26', '2026-09-27', // 中秋节（与国庆节相邻）
        ],
        // 调休日（周末上班但按2倍计算）
        extraWorkDays: [
            '2026-02-07', '2026-02-20', // 春节调休（2月7日周六、2月20日周五上班）
            '2026-04-25', '2026-05-08', // 劳动节调休（4月25日周六、5月8日周五上班）
            '2026-06-27', // 端午节调休（6月27日周六上班）
            '2026-09-19', '2026-10-09', // 中秋国庆调休（9月19日周六、10月9日周五上班）
        ],
        // 补班日（工作日上班，按1.5倍计算）
        makeUpWorkDays: [
            '2026-02-07', '2026-02-20', // 春节补班
            '2026-04-25', '2026-05-08', // 劳动节补班
            '2026-06-27', // 端午节补班
            '2026-09-19', '2026-10-09', // 中秋国庆补班
        ]
    },
    // 2024年节假日配置（示例）
    2024: {
        holidays: [
            '2024-01-01', // 元旦
            '2024-02-10', '2024-02-11', '2024-02-12', '2024-02-13', '2024-02-14', '2024-02-15', '2024-02-16', // 春节
            '2024-04-04', '2024-04-05', '2024-04-06', // 清明节
            '2024-05-01', '2024-05-02', '2024-05-03', '2024-05-04', '2024-05-05', // 劳动节
            '2024-06-10', // 端午节
            '2024-09-15', '2024-09-16', '2024-09-17', // 中秋节
            '2024-10-01', '2024-10-02', '2024-10-03', '2024-10-04', '2024-10-05', '2024-10-06', '2024-10-07', // 国庆节
        ],
        extraWorkDays: [
            '2024-02-04', '2024-02-17', // 春节调休
            '2024-04-07', '2024-04-28', // 劳动节调休
            '2024-09-14', '2024-09-29', // 中秋国庆调休
            '2024-10-12', // 国庆节调休
        ],
        makeUpWorkDays: [
            '2024-02-04', '2024-02-17', // 春节补班
            '2024-04-07', '2024-04-28', // 劳动节补班
            '2024-09-14', '2024-09-29', // 中秋国庆补班
            '2024-10-12', // 国庆节补班
        ]
    },
    // 2027年节假日配置（预留）
    2027: {
        holidays: [],
        extraWorkDays: [],
        makeUpWorkDays: []
    }
};

// 日期类型相关函数
function getDateType(date) {
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, '0');
    const day = String(date.getDate()).padStart(2, '0');
    const dateString = `${year}-${month}-${day}`;
    
    const yearConfig = holidayConfig[year];

    if (!yearConfig) {
        // 如果没有该年份的配置，按默认逻辑处理
        const dayOfWeek = date.getDay();
        return dayOfWeek === 0 || dayOfWeek === 6 ? 'weekend' : 'workday';
    }

    if (yearConfig.holidays.includes(dateString)) {
        return 'holiday';
    } else if (yearConfig.extraWorkDays.includes(dateString)) {
        return 'extraWork';
    } else if (yearConfig.makeUpWorkDays.includes(dateString)) {
        return 'makeUpWork';
    } else {
        const dayOfWeek = date.getDay();
        return dayOfWeek === 0 || dayOfWeek === 6 ? 'weekend' : 'workday';
    }
}

// 获取加班倍率的函数
function getOvertimeMultiplier(date) {
    const dateType = getDateType(date);

    switch (dateType) {
        case 'holiday':
            return 3; // 法定节假日3倍
        case 'weekend':
        case 'extraWork':
            return 2; // 周末和调休日2倍
        case 'workday':
        case 'makeUpWork':
        default:
            return 1.5; // 工作日和补班日1.5倍
    }
}